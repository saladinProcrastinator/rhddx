[build]
  base = "/"
  publish = "docs/"
  command = "npm run build && rm -rf docs && mkdir docs && rm -rf _site/docs && cp -r _site/** docs"

[build.environment]
  JEKYLL_ENV = "production"

# Production context: all deploys from the Production branch set in your site's
# deploy contexts will inherit these settings.
[context.production]
  publish = "docs/"
  command = "npm run build && rm -rf docs && mkdir docs && rm -rf _site/docs && cp -r _site/** docs"

# Deploy Preview context: all deploys generated from a pull/merge request will
# inherit these settings.
[context.deploy-preview]
  base = "/"
  publish = "docs/"
  command = "npm run build && rm -rf docs && mkdir docs && rm -rf _site/docs && cp -r _site/** docs"

# If skip_processing = true, all other settings are ignored
[build.processing]
  skip_processing = false
[build.processing.css]
  bundle = true
  minify = true
[build.processing.js]
  bundle = true
  minify = true
[build.processing.html]
  pretty_urls = true
[build.processing.images]
  compress = true

# Skip all post processing in deploy previews,
# ignoring any other settings
[context.deploy-preview.processing]
  skip_processing = true

[[redirects]]
  from = "/"
  to = "/design-manual"
  status = 302
  force = true
